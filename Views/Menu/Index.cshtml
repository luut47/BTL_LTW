@model List<BTL_LTW.Models.MenuCategory>

@{
    ViewData["Title"] = "Menu";
}

<h2>Menu</h2>

<div id="menuList">
    @foreach (var cat in Model)
    {
        <div class="menu-category">
            <h3>@cat.Name</h3>
            <div class="menu-category-items">
                @foreach (var item in cat.Items)
                {
                    <div class="menu-item-card">
                        <div class="menu-item-main">
                            <div>
                                <strong>@item.Name</strong> - @item.Price.ToString("N0") VND
                            </div>
                            <div>
                                <button class="btn btn-add"
                                        data-id="@item.Id"
                                        data-name="@item.Name"
                                        data-price="@item.Price">
                                    Thêm
                                </button>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>
    }
</div>

@* Nút Mở giỏ cố định góc phải dưới *@
<button id="openCartBtnFloating" title="Mở giỏ" class="cart-floating-btn">
    🛒 <span id="floatingCount">0</span>
</button>

@* Panel slide-in bên phải *@
<div id="cartPanel" class="cart-panel">
    <div class="cart-panel-header">
        <h3>Giỏ hàng</h3>
        <div>
            <button id="closeCartBtn" class="btn">Đóng</button>
        </div>
    </div>

    <div id="cartItemsWrap" class="cart-items-wrap">
        <!-- Các item sẽ render ở đây -->
    </div>

    <div class="cart-panel-footer">
        <div class="cart-total-row">Tổng: <strong id="cartTotal">0 VND</strong></div>
        <label class="cart-takeaway-label">
            <input type="checkbox" id="takeawayChk" />
            Mang về (Takeaway)
        </label>
        <div class="cart-footer-buttons">
            <button id="clearCartBtn" class="btn btn-secondary">Xóa giỏ</button>
            <button id="confirmCartBtn" class="btn btn-primary">Xác nhận món</button>
        </div>
        <div class="cart-footer-note">
            Khi xác nhận, đơn hàng sẽ gửi về bếp và lưu vào hệ thống (kèm mã đơn & thông tin khách).
        </div>
    </div>
</div>

@section Styles {
    <link rel="stylesheet" href="~/css/menu.css" />
}

@section Scripts {
    <script src="~/js/menu.js"></script>
}
